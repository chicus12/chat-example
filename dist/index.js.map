{"version":3,"sources":["../src/index.js"],"names":["app","use","json","urlencoded","extended","static","__dirname","secret","cookie","set","get","req","res","join","users","console","log","JSON","parse","session","currentUser","filter","user","username","render","title","listen","port","err","error"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;AAEA,IAAMA,MAAM,wBAAZ;;AAEAA,IAAIC,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAF,IAAIC,GAAJ,CAAQ,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAJ,IAAIC,GAAJ,CAAQ,kBAAQI,MAAR,CAAkBC,SAAlB,aAAR;AACAN,IAAIC,GAAJ,CAAQ,8BAAQ,EAAEM,QAAQ,UAAV,EAAsBC,QAAQ,EAA9B,EAAR,CAAR;;AAEAR,IAAIS,GAAJ,CAAQ,OAAR,EAAoBH,SAApB;AACAN,IAAIS,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;;AAEAT,IAAIU,GAAJ,CAAQ,GAAR;AAAA,uDAAa,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAES,kBAAS,eAAKC,IAAL,CAAUP,SAAV,EAAqB,kBAArB,CAAT,EAAmD,EAAnD,CAFT;;AAAA;AAELQ,iBAFK;;AAGTC,oBAAQC,GAAR,CAAYF,KAAZ;AAHS;AAAA,mBAIKG,KAAKC,KAAL,CAAWJ,KAAX,CAJL;;AAAA;AAITA,iBAJS;;AAAA,iBAKLH,IAAIQ,OAAJ,CAAYC,WALP;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMON,MAAMO,MAAN,CAAa;AAAA,qBAAQC,KAAKC,QAAL,KAAkBZ,IAAIQ,OAAJ,CAAYC,WAAZ,CAAwBG,QAAlD;AAAA,aAAb,CANP;;AAAA;AAMPT,iBANO;;AAAA;AAAA,6CASFF,IAAIY,MAAJ,CAAW,OAAX,EAAoB,EAAEC,OAAO,WAAT,EAAsBX,YAAtB,EAApB,CATE;;AAAA;AAAA;AAAA;AAAA,6CAWFC,QAAQC,GAAR,aAXE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAAA;AAAA;AAAA;AAAA;;AAeAhB,IAAIC,GAAJ,CAAQ,MAAR,EAAgB,uBAAhB;;AAEAD,IAAI0B,MAAJ,CAAW,iBAAOC,IAAlB,EAAwB,UAACC,GAAD,EAAS;AAC/B,MAAIA,GAAJ,EAAS,OAAOb,QAAQc,KAAR,+CAA0DD,GAA1D,CAAP;;AAET,SAAOb,QAAQC,GAAR,kCAA2C,iBAAOW,IAAlD,CAAP;AACD,CAJD","file":"index.js","sourcesContent":["import 'babel-polyfill'\nimport bodyParser from 'body-parser'\nimport express from 'express'\nimport { readFile } from 'fs'\nimport path from 'path'\nimport session from 'express-session'\n\nimport config from './config.json'\nimport routes from './routes/'\n\nconst app = express()\n\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\napp.use(express.static(`${__dirname}/public`))\napp.use(session({ secret: 'Kaso122@', cookie: {} }))\n\napp.set('views', `${__dirname}/views`)\napp.set('view engine', 'ejs')\n\napp.get('/', async (req, res) => {\n  try {\n    let users = await readFile(path.join(__dirname, '/users-mock.json'), {})\n    console.log(users)\n    users = await JSON.parse(users)\n    if (req.session.currentUser) {\n      users = await users.filter(user => user.username !== req.session.currentUser.username)\n    }\n\n    return res.render('index', { title: 'Osom Chat', users })\n  } catch (error) {\n    return console.log(error)\n  }\n})\n\napp.use('/api', routes())\n\napp.listen(config.port, (err) => {\n  if (err) return console.error(`A error ocurred trying lift the express: ${err}`)\n\n  return console.log(`Chat server running on port ${config.port}`)\n})\n"]}